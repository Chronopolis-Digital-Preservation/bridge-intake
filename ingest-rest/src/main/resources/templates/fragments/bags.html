<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head lang="en">
    <meta charset="UTF-8"/>
    <title></title>
    <link href="../static/css/bootstrap.min.css"
          th:href="@{/css/bootstrap.min.css}"
          rel="stylesheet">
    </link>

</head>
<body>
    <div th:fragment="simple-table">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Depositor</th>
                <th>Name</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <!--@thymesVar id="bags" type="List<Bag>"-->
            <!--@thymesVar id="bag" type="org.chronopolis.rest.models.Bag"-->
            <tr th:each="bag: ${bags}">
                <td><a th:text="${bag.ID}" th:href="@{/bags/} + ${bag.ID}"></a></td>
                <td th:text="${bag.depositor}"></td>
                <td th:text="${bag.name}"></td>
                <td th:text="${bag.status}"></td>
            </tr>
            </tbody>
        </table>
    </div>

    <!-- This is typically only for an individual bag, as getting the token count
         can be a long operation over multiple bags -->
    <div th:fragment="extended-table">
        <form method="POST">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>ID</th>
                <th>Depositor</th>
                <th>Name</th>
                <th>Size</th>
                <th>Total Files</th>
                <th>Total Tokens</th>
                <th>Status</th>
            </tr>
            </thead>
            <tbody>
            <!--@thymesVar id="bags" type="List<Bag>"-->
            <!--@thymesVar id="tokens" type="Long"-->
            <!--@thymesVar id="bag" type="org.chronopolis.rest.models.Bag"-->
            <tr th:each="bag: ${bags}">
                <td th:text="${bag.ID}"></td>
                <td th:text="${bag.depositor}"></td>
                <td th:text="${bag.name}"></td>
                <td th:text="${bag.size}"></td>
                <td th:text="${bag.totalFiles}"></td>
                <td th:text="${tokens}"></td>
                <td>

                <!--@thymesVar id="statuses" type="List" -->
                <select name="status" id="status">
                    <option th:each="status : ${statuses}"
                            th:value="${status.value}" th:text="${status.value}"
                            th:selected="${status == bag.status}">
                    </option>
                    <!-- <td th:text="${bag.status}"></td> -->
                </select>
                </td>
            </tr>
            </tbody>
        </table>
            <input type="submit" value="Update Bag" class="btn btn-small"/>
        </form>
    </div>
</body>
</html>